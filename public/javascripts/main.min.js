function isElementInViewport(e){var t=e.getBoundingClientRect(),a=window.innerWidth||doc.documentElement.clientWidth,n=window.innerHeight||doc.documentElement.clientHeight,o=function(e,t){return document.elementFromPoint(e,t)};return!(t.right<0||t.bottom<0||t.left>a||t.top>n)&&(e.contains(o(t.left,t.top))||e.contains(o(t.right,t.top))||e.contains(o(t.right,t.bottom))||e.contains(o(t.left,t.bottom)))}function gallery(e){$(e).find(".inner").attr("active","");$(e).find("span").html();var t=$(e).attr("data-id");$.ajax({url:"/getGallery",method:"POST",data:{id:t},success:function(e){if(e.success){for(var a=0;a<e.images.length;a++)$("#gallery .fotorama").append('<img src="/images/portfolio/'+t+"/gallery/"+e.images[a]+'">');$("#gallery").fadeIn(200,"linear",function(){fotorama=$("#gallery .fotorama").fotorama().data("fotorama"),$("#gallery .fotorama").fadeTo(200,1),$("body").css("overflow","hidden")})}else alert("An error has occurred while retrieving images"),console.error(e.error_msgs)},error:function(e){alert("An error has occurred while retrieving images"),console.error(e)}})}function closeGallery(){$("#gallery").fadeOut(200,"linear",function(){fotorama.destroy(),$("#portfolio .tiles .tile .inner").removeAttr("active"),$("#gallery .fotorama").fadeTo(200,0),$("#gallery .fotorama").html(""),$("body").css("overflow","auto")})}function animateIcons(e,t){$($("#skills .icon")[e]).addClass("animated fadeInDown"),setTimeout(function(){e<=t&&animateIcons(++e,t)},150)}function logVisit(){var e=new UAParser;$.ajax({url:"/logVisit",method:"POST",data:e.getResult(),success:function(e){e.success||console.error(e.error_msgs)},error:function(e){console.error(e)}})}var fotorama;$(window).on("load resize scroll",function(e){if($("#cd-timeline .cd-timeline-block").each(function(e,t){isElementInViewport(t)&&($(t).find(".cd-timeline-content").css("opacity",1),e%2!=0||window.innerWidth<1170?$(t).find(".cd-timeline-content").addClass("animated slideInRight"):$(t).find(".cd-timeline-content").addClass("animated slideInLeft"))}),isElementInViewport(document.getElementById("skills"))){var t=$("#skills .icon").length-1;animateIcons(0,t)}isElementInViewport($("#contact .form-box").get(0))&&($("#contact .form-box").css("opacity",1),$("#contact .form-box").addClass("animated fadeInDown"))}),$(function(){$("#header .title").css("opacity",1),$("#header .title").addClass("animated flash"),particlesJS.load("header","assets/particles.json",function(){setTimeout(function(){$("#header .portrait-container").fadeIn(1e3)},700)}),$("[data-scroll]").click(function(){var e=60;window.innerWidth<700&&(e=50);var t=Math.ceil($("#"+this.getAttribute("data-scroll")).position().top-e);$("html, body").animate({scrollTop:t},700)}),$('form[name="contact"]').validate({rules:{name:{required:!0},email:{required:!0,email:!0},subject:{required:!0},message:{required:!0}},messages:{name:{required:"Please enter your name"},email:{required:"Please enter your email",email:"Please enter a valid email address"},subject:{required:"Please enter a subject"},message:{required:"Please enter a message"}},submitHandler:function(e){grecaptcha.ready(function(){grecaptcha.execute("6Ld79v0UAAAAAKTK-j722WE9cDWG9lDV18qB209c",{action:"submit"}).then(function(t){$('form[name="contact"] input[type="submit"]').attr("disabled",!0),$('form[name="contact"] input[type="submit"]').attr("value","Sending..."),$.ajax({url:"/contact",method:"POST",data:{name:e.elements.name.value,email:e.elements.email.value,subject:e.elements.subject.value,message:e.elements.message.value,token:t},success:function(e){e.success?($('form[name="contact"]').remove(),$(".form-message").html("Thanks for your message!")):($('form[name="contact"] input[type="submit"]').attr("disabled",!1),$('form[name="contact"] input[type="submit"]').attr("value","Submit"),alert("Your message could not be sent. Please try again later"),console.error(e.error_msgs))},error:function(e){$('form[name="contact"] input[type="submit"]').attr("disabled",!1),$('form[name="contact"] input[type="submit"]').attr("value","Submit"),alert("Your message could not be sent. Please try again later"),console.error(e)}})})})}}),logVisit()}),$(document).keyup(function(e){27==e.keyCode&&$("#gallery").is(":visible")&&closeGallery()});